<!DOCTYPE html>

<html>
	<head>
		<title>Jhojancito  movement</title>
	</head>
	<body>

		<canvas id='canvas'></canvas><br />
        <canvas tabindex='1'></canvas>
		<script>
		document.addEventListener('keydown', (event) => {
 		const keyName = event.key;

		if (keyName === 'ArrowRight') {
				left = false;
				right = true;
   		return;
		} 
        if (keyName === 'ArrowLeft') {
		left = true;
		right = false;
   		return;
		}
		}, false);
        document.addEventListener('keyup', (event) => {
  		const keyName = event.key;
		if (keyName === 'ArrowRight') {
    	left = false;
		right = false;
 			}
        if (keyName === 'ArrowLeft') {
    	left = false;
		right = false;
 			}
		}, false);
			var canvasWidth = 500;
			var canvasHeight = 350;

			var spriteWidth = 864;
			var spriteHeight = 280;

			var rows = 2;
			var cols = 8;

			var trackRight = 0;
			var trackLeft = 1;

			var width = spriteWidth/cols;
			var height = spriteHeight/rows;

			var curFrame = 0;
			var frameCount = 8;

			var x=0;
			var y=200;

			var srcX;
			var srcY;

			var left = false;
			var right = true;

			var speed = 8;

			var canvas = document.getElementById('canvas');
			canvas.width = canvasWidth;
			canvas.height = canvasHeight;
			var ctx = canvas.getContext("2d");
			ctx.fillStyle = "gray";
			ctx.fillRect(0, 0, canvas.width, canvas.height);
			
			var character = new Image();			
			character.src = "https://i1.wp.com/www.simplifiedcoding.net/wp-content/uploads/2016/02/character.png?w=864&ssl=1";

			function updateFrame(){
				curFrame = ++curFrame % frameCount;
				srcX = curFrame * width;
				ctx.clearRect(x,y,width,height);
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				if(left && x>0){
					srcY = trackLeft * height;
					x-=speed;
				}
				if(right && x<canvasWidth-width){
					srcY = trackRight * height;
					x+=speed;
				}
			}

			function draw(){
				updateFrame();
				ctx.drawImage(character,srcX,srcY,width,height,x,y,width,height);
			}


			function moveLeft(){
				left = true;
				right = false;
			}

			function moveRight(){
				left = false;
				right = true;
			}

			setInterval(draw,140);

		</script>
	</body>
</html>
